
{% load static %}
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Портфолио — Reshetki House</title>
  <meta name="color-scheme" content="light" />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== Base / Reset ===== */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;line-height:1.5;-webkit-font-smoothing:antialiased;background:var(--bg);color:#f2f2f2;
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans",sans-serif}
    img,video{max-width:100%;display:block}
    input,button,textarea,select{font:inherit}
    a{color:inherit}
    :root{--text:#111;--muted:#6b7280;--shade:rgba(17,17,17,.08);--radius:16px;--brand:#111;--bg-soft:#fafafa;--bg:#0b0b0b;--panel:#111;--gold:#d4af37;--gold-2:#a97c14}
    .container{width:min(1200px,92vw);margin-inline:auto}

    /* ===== Theme: Gold (dark) overrides ===== */
.site-header{background:rgba(0,0,0,.6);border-bottom:1px solid rgba(255,255,255,.09)}
.menu a{color:#f2f2f2}
.btn{border:1px solid var(--gold-2);background:var(--gold);color:#1a1a1a}
.btn.outline{background:transparent;color:var(--gold);border-color:var(--gold)}
.btn:hover{opacity:.92}

    /* ===== Header (simple, same style) ===== */
    .site-header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(8px);
      background:rgba(255,255,255,.82);border-bottom:1px solid var(--shade)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.9rem 0}
    .brand{font-weight:700;letter-spacing:.08em}
    .menu{display:none;gap:1.2rem;font-size:.95rem}
    .menu a{text-decoration:none;opacity:.9}
    .menu a:hover{opacity:.6}
    @media (min-width:900px){.menu{display:flex}}
    .btn{display:inline-flex;align-items:center;gap:.5rem;border:1px solid #000;background:var(--brand);color:#fff;
      padding:.8rem 1.2rem;border-radius:999px;cursor:pointer;text-decoration:none;transition:.25s ease}
    .btn:hover{opacity:.9;transform:translateY(-1px)}
    .btn.outline{background:#fff;color:#111}

    /* ===== Hero / Page Title ===== */
    .hero_project{padding:38px 0 6px;background:transparent}
    .hero_project h1{margin:0 0 10px;font-size:clamp(1.8rem,3vw + .4rem,2.4rem)}
    .hero_project p{margin:0;color:var(--muted);max-width:70ch}

    /* ===== Controls ===== */
    .controls{display:grid;gap:12px;padding:14px 0 10px}
    @media(min-width:900px){.controls{grid-template-columns:1fr auto;align-items:end}}
    .chips{display:flex;flex-wrap:wrap;gap:.5rem; margin-bottom: 15px;}
    .chip{border:1px solid var(--shade);border-radius:999px;padding:.55rem .9rem;background:#121212; color:#f2f2f2;cursor:pointer;transition:.2s}
    .chip:hover{transform:translateY(-1px)}
    .chip.active{background:var(--gold);color:#1a1a1a;border-color:var(--gold)}
    .filters-r{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .search{border:1px solid var(--shade);border-radius:12px;padding:.7rem .9rem;min-width:220px}
    .select{border:1px solid var(--shade);border-radius:12px;padding:.6rem .8rem;background:#121212; color:#f2f2f2;}

    /* ===== Grid (Portfolio) ===== */
    .grid{display:grid;grid-template-columns:1fr;gap:14px;padding:8px 0 30px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}

    .card{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--shade);background:#151515;
      transform:translateY(10px);opacity:0;transition:transform .45s ease, opacity .45s ease}
    .card.is-visible{transform:translateY(0);opacity:1}
    .thumb{position:relative;aspect-ratio:4/5;overflow:hidden}
    .thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transition:transform .6s ease}
    .card:hover .thumb img{transform:scale(1.04)}
    .grad{position:absolute;inset:0;background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0) 56%)}
    .meta{position:absolute;left:0;right:0;bottom:0;color:#fff;padding:14px}
    .meta .line{font-size:.78rem;opacity:.85}
    .meta h3{margin:4px 0 0;font-size:1rem;font-weight:600}

    /* ===== Modal (Lightbox) ===== */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
    .modal.is-open{display:flex}
    .modal-card{width:min(1000px, 96vw);background:#121212;border-radius:16px;overflow:hidden;max-height:92vh;display:grid;grid-template-rows:auto 1fr}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--shade)}
    .modal-body{display:grid;gap:12px;padding:12px 14px}
    .modal-gallery{position:relative}
    .modal-gallery img{width:100%;height:auto;border-radius:12px}
    .modal-info{display:grid;gap:6px}
    .x{border:none;background:#111;color:#fff;border-radius:10px;padding:.45rem .7rem;cursor:pointer}

    /* ===== Footer ===== */
    .site-footer{padding:36px 0 20px;background:#0b0b0b;border-top:1px solid var(--shade)}
    .ft{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap;color:var(--muted);font-size:.9rem}
  </style>
  <link rel="stylesheet" href="../css/main.css">

</head>
<body id="top" class="theme-gold">
  <!-- Header -->
 <header class="site-header" id="header">
    <div class="container nav">
      <div class="brand">
        <img src="../assets/logo-reshetki-house.jpeg" alt="Reshetki House" class="brand-logo" />
        <a href="{% url 'home' %}" class="brand-text">RESHETKI HOUSE</span>
      </div>
      <div class="nav-right" style="display: flex; align-items: center; margin-left: auto;">
       <nav class="menu" aria-label="Главное меню">
          <a href="{% url 'catalog' %}">Услуги</a>
          <a href="{% url 'projects' %}">Портфолио</a>
          <a href="{% url 'contact' %}">Контакты</a>
        </nav>

        <!-- Header quick actions (visible on mobile like reference site) -->
        <div class="header-actions">
          <a class="ha ha--call" href="tel:+998971991661" aria-label="Позвонить"></a>
          <a class="ha ha--tg-v2" href="https://wa.me/998971991661" target="_blank" rel="noopener" aria-label="Написать в WhatsApp"></a>
        </div>

        <!-- Burger button (opens dropdown under header) -->
        <button class="burger" type="button" aria-label="Открыть меню" aria-controls="mobileNav" aria-expanded="false">
          <span class="burger-box">
            <span class="burger-inner"></span>
          </span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile dropdown panel -->
  <nav id="mobileNav" class="mobile-nav" aria-label="Мобильное меню">
    <div class="mobile-nav__inner container">
      <ul class="mobile-nav__list">
        <li> <a href="{% url 'catalog' %}">Услуги</a></li>
        <li>  <a href="{% url 'projects' %}">Портфолио</a></li>
        <li> <a href="{% url 'contact' %}">Контакты</a></li>

      </ul>
    </div>
  </nav>

  <!-- Hero / Title -->
  <section class="hero_project">
    <div class="container">
      <h1>+998971991661</h1> 
      <h1>Наши работы: решётки, ворота, навесы, перила</h1>
      <p>Реализованные изделия из металла: оконные и балконные решётки, кованые ворота, навесы и перила. Фильтруйте по типу, году, популярности или названию.</p>
    </div>
  </section>

  <!-- Controls -->
  <section class="controls">
    <div class="container">
      <div class="chips" id="pfChips" role="tablist" aria-label="Фильтр по типу работ">
<button class="chip active" data-cat="all" role="tab" aria-selected="true">Все</button>
<button class="chip" data-cat="grilles" role="tab" aria-selected="false">Решётки</button>
<button class="chip" data-cat="gates" role="tab" aria-selected="false">Ворота</button>
<button class="chip" data-cat="canopies" role="tab" aria-selected="false">Навесы</button>
<button class="chip" data-cat="railings" role="tab" aria-selected="false">Перила</button>
      </div>

      <div class="filters-r">
        <input class="search" type="search" id="pfSearch" placeholder="Поиск проекта…" aria-label="Поиск по портфолио" />
        <select class="select" id="pfYear">
          <option value="all">Год: все</option>
          <option value="2025">2025</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
        </select>
        <select class="select" id="pfSort">
          <option value="pop">По популярности</option>
          <option value="new">Сначала новые</option>
          <option value="name">По названию</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Grid -->
  <main class="container">
    <section class="grid" id="pfGrid" aria-live="polite">
      <!-- Demo cards (replace with real photos/content) -->
            {% for item in items %}
            <article class="card" data-cat="{{ item.category.slug }}">
              <div class="media">
                <img src="{{ item.image.url }}" alt="Проект {{ item.uid }}" loading="lazy" />
                <div class="grad"></div>
                <header class="meta">
                  <div class="line">{{ item.uid }}</div>
                </header>
              </div>
            </article>
            {% endfor %}
    </section>
  </main>

  <!-- Modal (lightbox) -->
  <div class="modal" id="pfModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-card" role="document">
      <div class="modal-head">
        <strong id="mTitle">Проект</strong>
        <button class="x" id="mClose" aria-label="Закрыть">Закрыть</button>
      </div>
      <div class="modal-body">
        <div class="modal-gallery"><img id="mImg" src="" alt="" /></div>
        <div class="modal-info">
          <div id="mMeta" class="muted"></div>
          <p id="mDesc"> +998971991661 </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer" aria-labelledby="footer-title">
  <div class="container footer-grid">
    <div>
      <div id="footer-title" class="ft-title">О нас</div>
      <p class="ft-text">«Reshetki House» — производство кованых решёток, ворот, навесов и перил. Работаем по Ташкенту и области. Премиальное качество и монтаж под ключ.</p>
    </div>

    <nav class="ft-col" aria-label="Что мы делаем">
      <div class="ft-title">Что мы делаем</div>
      <ul class="ft-list">
        <li><a href="#">Кухни на заказ</a></li>
        <li><a href="#">Гардеробные</a></li>
        <li><a href="#">Скрытые двери</a></li>
        <li><a href="#">Комплектующие</a></li>
      </ul>
    </nav>

    <nav class="ft-col" aria-label="Полезные ссылки">
      <div class="ft-title">Полезные ссылки</div>
      <ul class="ft-list">
        <li><a href="/pages/catalog.html">Услуги</a></li>
        <li><a href="/pages/projects.html">Портфолио</a></li>
        <li><a href="/pages/contact.html">Контакты</a></li>
      </ul>
    </nav>

    <div class="ft-col">
      <div class="ft-title">Контакты</div>
      <ul class="ft-list">
        <li>Тел: +998 (97) 199-16-61</li>
        <li>Email: info@reshetkihouse.uz</li>
        <li>Адрес: Ташкент, Узбекистан</li>
      </ul>
    </div>
  </div>
  <div class="container ft-bottom">
    <span>© 2025 Reshetki House. Все права защищены.</span>
  </div>
</footer>

  <script>
    // Sticky header bg
    (function(){
      const header = document.querySelector('.site-header');
      const onScroll = ()=> header.style.background = window.scrollY>4 ? 'rgba(0,0,0,.72)' : 'rgba(0,0,0,.6)';
      onScroll();
      window.addEventListener('scroll', onScroll, {passive:true});
    })();

    // Reveal observer
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('is-visible'); io.unobserve(e.target); } })
    }, {threshold:0.08});
    document.querySelectorAll('.card').forEach(el=> io.observe(el));

    // Filtering / Search / Sort
    (function(){
      const grid = document.getElementById('pfGrid');
      const chips = document.getElementById('pfChips');
      const search = document.getElementById('pfSearch');
      const year = document.getElementById('pfYear');
      const sort = document.getElementById('pfSort');
      const items = Array.from(grid.querySelectorAll('.card'));
      const state = {cat:'all', q:'', year:'all', sort:'pop'};
      const norm = s => (s||'').toString().toLowerCase().trim();

      function apply(){
        const filtered = items.filter(it=>{
          const cOk = state.cat==='all' || it.dataset.cat===state.cat;
          const yOk = state.year==='all' || it.dataset.year===state.year;
          const nOk = norm(it.dataset.name).includes(norm(state.q));
          return cOk && yOk && nOk;
        });
        const sorted = filtered.sort((a,b)=>{
          if(state.sort==='new') return (b.dataset.year|0)-(a.dataset.year|0);
          if(state.sort==='name') return a.dataset.name.localeCompare(b.dataset.name,'ru');
          return (a.dataset.pop|0)-(b.dataset.pop|0);
        });
        items.forEach(it=> it.style.display='none');
        sorted.forEach(it=> it.style.display='');
      }

      if(chips){
        chips.addEventListener('click', e=>{
          const btn = e.target.closest('.chip'); if(!btn) return;
          state.cat = btn.dataset.cat || 'all';
          chips.querySelectorAll('.chip').forEach(c=>{c.classList.remove('active'); c.setAttribute('aria-selected','false');});
          btn.classList.add('active'); btn.setAttribute('aria-selected','true');
          apply();
        });
      }
      if(search){ search.addEventListener('input', ()=>{ state.q = search.value; apply(); }); }
      if(year){ year.addEventListener('change', ()=>{ state.year = year.value; apply(); }); }
      if(sort){ sort.addEventListener('change', ()=>{ state.sort = sort.value; apply(); }); }
      apply();

      // Support deep links like /projects.html#grilles or #2025
      if(location.hash){
        const h = location.hash.replace('#','');
        const cats = ['all','grilles','gates','canopies','railings'];
        if(cats.includes(h)){
          const btn = chips.querySelector(`[data-cat="${h}"]`);
          if(btn){ btn.click(); }
        } else if(/^\d{4}$/.test(h)){
          year.value = h; state.year = h; apply();
        }
      }
    })();

    // Modal (Lightbox)
    (function(){
      const modal = document.getElementById('pfModal');
      const mImg = document.getElementById('mImg');
      const mTitle = document.getElementById('mTitle');
      const mMeta = document.getElementById('mMeta');
      const mClose = document.getElementById('mClose');

      function open(card){
        const img = card.querySelector('img');
        const title = card.querySelector('h3')?.textContent || 'Проект';
        const meta = `${card.dataset.cat} · ${card.dataset.year}`;
        mImg.src = img.src.replace('/800/1000','/1200/900');
        mImg.alt = img.alt || title;
        mTitle.textContent = title;
        mMeta.textContent = meta;
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden','false');
      }
      function close(){
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden','true');
      }

      document.getElementById('pfGrid').addEventListener('click', e=>{
        const card = e.target.closest('.card');
        if(!card) return;
        open(card);
      });
      modal.addEventListener('click', e=>{ if(e.target===modal) close(); });
      mClose.addEventListener('click', close);
      document.addEventListener('keydown', e=>{ if(e.key==='Escape' && modal.classList.contains('is-open')) close(); });
    })();

     document.addEventListener('DOMContentLoaded', function() {
      const menu = document.getElementById('mobileNav');
      const burger = document.querySelector('.burger');
      if (!menu || !burger) return;
      let isOpen = false;
      function openMenu(){
        if(isOpen) return; isOpen = true;
        menu.style.display='block';
        const target = menu.scrollHeight;
        menu.style.height='0px';
        menu.style.transition='height 0.28s ease';
        requestAnimationFrame(()=>{ menu.style.height = target + 'px'; });
        burger.setAttribute('aria-expanded','true');
        document.body.classList.add('menu-open');
      }
      function closeMenu(){
        if(!isOpen) return; isOpen=false;
        const current = menu.scrollHeight;
        menu.style.height = current + 'px';
        menu.style.overflow = 'hidden';
        menu.style.transition = 'height 0.28s ease';
        requestAnimationFrame(()=>{ menu.style.height = '0px'; });
        const onEnd = (e)=>{
          if(e.propertyName !== 'height') return;
          menu.removeEventListener('transitionend', onEnd);
          menu.style.display='none'; menu.style.height=''; menu.style.transition=''; menu.style.overflow='';
        };
        menu.addEventListener('transitionend', onEnd);
        setTimeout(()=>{ if(!isOpen){ menu.style.display='none'; menu.style.height=''; menu.style.transition=''; menu.style.overflow=''; } }, 320);
        burger.setAttribute('aria-expanded','false');
        document.body.classList.remove('menu-open');
      }
      function toggleMenu(){ isOpen ? closeMenu() : openMenu(); }
      burger.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); toggleMenu(); });
      document.addEventListener('keydown', function(e){ if(e.key==='Escape' && isOpen) closeMenu(); });
      menu.addEventListener('click', function(e){ if(e.target.tagName==='A' && isOpen) closeMenu(); });
      const mq = window.matchMedia('(min-width: 900px)');
      mq.addEventListener('change', function(e){ if(e.matches && isOpen) closeMenu(); });
      burger.setAttribute('aria-expanded','false');
      menu.style.display='none';
    });
  </script>
</body>
</html>